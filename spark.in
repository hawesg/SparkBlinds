// Spark Core Blinds 
//
// Author: Garrett Hawes
// Date: 2014-04-01
// Spark core code to control blinds by way of a servo driven by the core. Based on work by Justin Wurth.

Servo myservo;
int servo_pin = A4;
int setState(String command);
//int writeMil(String command);
int state=170;
void setup(){
    myservo.attach(servo_pin); 
    Spark.function("setstate", setState);
    //Spark.function("writemil", writeMil);
    Spark.variable("getstate", &state, INT);
}
void loop(){
}


int setState(String command){ 
    state = command.toInt(); //converts command to integer to be used for positional arrangement
    state = map (state, 0, 99, 0, 159);
    myservo.write(state);
    return 1;
}
